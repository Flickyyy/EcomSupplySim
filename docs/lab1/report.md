# ะะ โ1 โ ะัััั

> **ะะปะฐะฒะฝัะน ัะฐะนะป:** [`report.html`](report.html) โ ะพัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต.

## ะะพ ะฟัะฝะบัะฐะผ ะทะฐะดะฐะฝะธั

| ะขัะตะฑะพะฒะฐะฝะธะต | ะกะตะบัะธั ะฒ HTML |
|---|---|
| 1.1 ะะฒะตะดะตะฝะธะต (ะฑะปะพะบะธ, ะทะฐะบะพะฝั, ะฟะตัะตัะพะดั) | ยง1 โ 1.1 |
| 1.2 ะะฟะธัะฐะฝะธะต ัะธััะตะผั (ะณัะฐะฝะธัั, ะฑะปะพะบ-ััะตะผะฐ, ะะะ) | ยง1 โ 1.2 |
| 1.3 ะัะฝะพะฒะฝัะต ะฟัะพัะตััั (6 ะฑะปะพะบะพะฒ) | ยง2 |
| 1.4 ะะฐัะฟัะตะดะตะปะตะฝะธั (8 ะทะฐะบะพะฝะพะฒ) | ยง3 |
| 2.1 ะัะพะดะฝัะต ะฟะฐัะฐะผะตััั | ยง4 |
| 2.2 ะฃัะปะพะฒะธั ะธ ะฟัะตะดะฟะพะปะพะถะตะฝะธั | ยง4 |
| 3.1 ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั | ยง5 |
| 3.2 ะะฝะฐะปะธะท ัะตะทัะปััะฐัะพะฒ | ยง5 |
| 4. ะัะตะทะตะฝัะฐัะธั (what/why/expect/impl) | ยงะตะดะธะฝัะน HTML-ะดะพะบัะผะตะฝั |


**ะขะตะผะฐ (ะฒะฐัะธะฐะฝั 6):** ะะพะดะตะปะธัะพะฒะฐะฝะธะต ัะปัะถะฑั ะดะพััะฐะฒะบะธ ั ะฒะพะทะฒัะฐัะพะผ ะธะท ะฝะตัะบะพะปัะบะธั ะผะฐะณะฐะทะธะฝะพะฒ  
**ะฏะทัะบ ัะตะฐะปะธะทะฐัะธะธ:** Go (Golang)  
**ะะตะฟะพะทะธัะพัะธะน:** `EcomSupplySim`  
**ะะฐัะฐ:** ัะตะฒัะฐะปั 2026

---

## ะกะพะดะตัะถะฐะฝะธะต

1. [ะะฟะธัะฐะฝะธะต ัะธััะตะผั](#1-ะพะฟะธัะฐะฝะธะต-ัะธััะตะผั)  
   1.1 [ะกะธััะตะผะฝัะต ะณัะฐะฝะธัั](#11-ัะธััะตะผะฝัะต-ะณัะฐะฝะธัั)  
   1.2 [ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั](#12-ะพัะฝะพะฒะฝัะต-ะบะพะผะฟะพะฝะตะฝัั)  
   1.3 [ะะปะพะบ-ััะตะผะฐ ัะธััะตะผั](#13-ะฑะปะพะบ-ััะตะผะฐ-ัะธััะตะผั)  
   1.4 [ะะธะฐะณัะฐะผะผะฐ ะฟะพัะพะบะพะฒ ะดะฐะฝะฝัั ะธ ะผะฐัะตัะธะฐะปะพะฒ](#14-ะดะธะฐะณัะฐะผะผะฐ-ะฟะพัะพะบะพะฒ-ะดะฐะฝะฝัั-ะธ-ะผะฐัะตัะธะฐะปะพะฒ)
2. [ะัะฝะพะฒะฝัะต ะฟัะพัะตััั](#2-ะพัะฝะพะฒะฝัะต-ะฟัะพัะตััั)
3. [ะัะฟะพะปัะทัะตะผัะต ัะฐัะฟัะตะดะตะปะตะฝะธั](#3-ะธัะฟะพะปัะทัะตะผัะต-ัะฐัะฟัะตะดะตะปะตะฝะธั)
4. [ะะฐัะฐะผะตััั ะผะพะดะตะปะธ](#4-ะฟะฐัะฐะผะตััั-ะผะพะดะตะปะธ)  
   4.1 [ะัะพะดะฝัะต ะฟะฐัะฐะผะตััั](#41-ะฒัะพะดะฝัะต-ะฟะฐัะฐะผะตััั)  
   4.2 [ะฃัะปะพะฒะธั ะธ ะฟัะตะดะฟะพะปะพะถะตะฝะธั](#42-ััะปะพะฒะธั-ะธ-ะฟัะตะดะฟะพะปะพะถะตะฝะธั)
5. [ะะตะทัะปััะฐัั ะผะพะดะตะปะธัะพะฒะฐะฝะธั](#5-ัะตะทัะปััะฐัั-ะผะพะดะตะปะธัะพะฒะฐะฝะธั)  
   5.1 [ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั](#51-ะพะถะธะดะฐะตะผัะต-ัะตะทัะปััะฐัั)  
   5.2 [ะะฝะฐะปะธะท ัะตะทัะปััะฐัะพะฒ](#52-ะฐะฝะฐะปะธะท-ัะตะทัะปััะฐัะพะฒ)

---

## 1. ะะฟะธัะฐะฝะธะต ัะธััะตะผั

### ะะตะฐะปัะฝัะน ะฐะฝะฐะปะพะณ

ะะพะดะตะปั ะพะฟะธััะฒะฐะตั ะปะพะณะธััะธะบั ะผะฐัะบะตัะฟะปะตะนัะฐ ัะธะฟะฐ **Ozon / Wildberries / AliExpress Express**: ะฝะตัะบะพะปัะบะพ ัะฐัะฟัะตะดะตะปัะฝะฝัั ัะบะปะฐะดะพะฒ-ะผะฐะณะฐะทะธะฝะพะฒ, ะฟัะป ะบัััะตัะพะฒ, ะฒะพะทะฒัะฐัั ัะพะฒะฐัะพะฒ ั ะพะฑัะฐัะฝะพะน ะผะฐัััััะธะทะฐัะธะตะน โ ัะธะฟะธัะฝัะต ะฟัะพะฑะปะตะผั, ั ะบะพัะพััะผะธ ััะฐะปะบะธะฒะฐัััั ัะปัะถะฑั ะดะพััะฐะฒะบะธ ยซะฟะพัะปะตะดะฝะตะน ะผะธะปะธยป ะฒ ัะพััะธะนัะบะธั ะณะพัะพะดะฐั.

### 1.1 ะกะธััะตะผะฝัะต ะณัะฐะฝะธัั

| | |
|---|---|
| **ะัะพะด** | ะะปะธะตะฝััะบะฐั ะทะฐัะฒะบะฐ: ัะฟะธัะพะบ SKU, ะฐะดัะตั ะดะพััะฐะฒะบะธ, ะฒัะตะผะตะฝะฝะพะต ะพะบะฝะพ, ะฟัะธะพัะธัะตั |
| **ะััะพะด** | ะกัะฐััั ะทะฐะบะฐะทะฐ: `DELIVERED` (ััะฟะตัะฝะฐั ะดะพััะฐะฒะบะฐ) **ะธะปะธ** `RESTOCKED` (ัะพะฒะฐั ะฒะพะทะฒัะฐััะฝ) |

**ะะบะปััะตะฝะพ ะฒ ะผะพะดะตะปั:**
- ะะตะฝะตัะฐัะธั ะทะฐะบะฐะทะพะฒ ั ัััะพัะฝะพะน ะฝะตัะฐะฒะฝะพะผะตัะฝะพัััั (ัะฐัั ะฟะธะบ)
- ะะธัะฟะตััะตัะธะทะฐัะธั: ะฒัะฑะพั ะพะฟัะธะผะฐะปัะฝะพะณะพ ะผะฐะณะฐะทะธะฝะฐ ะฟะพ ะฝะฐะปะธัะธั ัะพะฒะฐัะฐ ะธ ัะฐัััะพัะฝะธั
- ะกะฑะพัะบะฐ ะธ ัะฟะฐะบะพะฒะบะฐ ะทะฐะบะฐะทะฐ ะฝะฐ ัะบะปะฐะดะต (ั ะพัะตัะตะดัั ะฟัะธ ะฟะตัะตะณััะทะบะต)
- ะะฐัััััะธะทะฐัะธั ะธ ะดะฒะธะถะตะฝะธะต ะบัััะตัะพะฒ ะฟะพ ัะพะฟะพะปะพะณะธะธ ะณะพัะพะดะฐ
- ะะทะฐะธะผะพะดะตะนััะฒะธะต ั ะบะปะธะตะฝัะพะผ ะฟัะธ ะดะพััะฐะฒะบะต (ะฟัะธะฝัั / ะพัะบะฐะท / ะฝะต ะดะพะผะฐ)
- ะะฑัะฐัะฝะฐั ะปะพะณะธััะธะบะฐ: ะฒะพะทะฒัะฐั ะฒ ะธััะพะดะฝัะน ะผะฐะณะฐะทะธะฝ ะธะปะธ ะฒ ัะพััะธัะพะฒะพัะฝัะน ัะฐะฑ

**ะัะบะปััะตะฝะพ ะธะท ะผะพะดะตะปะธ:**
- ะะปะฐััะถะฝะฐั ะพะฑัะฐะฑะพัะบะฐ (ััะธัะฐะตะผ ะฟัะตะดะพะฟะปะฐัั ะผะณะฝะพะฒะตะฝะฝะพะน)
- ะะฐัะบะตัะธะฝะณ ะธ ัะตะบะปะฐะผะฝัะต ะฐะบัะธะธ
- ะะพะฟะพะปะฝะตะฝะธะต ัะบะปะฐะดะฐ ะพั ะฟะพััะฐะฒัะธะบะพะฒ (ะธะฝะฒะตะฝัะฐัั ะทะฐะดะฐัััั ะฝะฐัะฐะปัะฝัะผะธ ััะปะพะฒะธัะผะธ)
- HR-ะฟัะพัะตััั ะฒะฝัััะธ ะผะฐะณะฐะทะธะฝะพะฒ

---

### 1.2 ะัะฝะพะฒะฝัะต ะบะพะผะฟะพะฝะตะฝัั

| ะะพะผะฟะพะฝะตะฝั | ะขะธะฟ | ะะพะปั |
|---|---|---|
| **OrderGenerator** | ะัะพัะตัั | ะกะพะทะดะฐัั ะทะฐัะฒะบะธ (ะัะฐััะพะฝ) |
| **Dispatcher** | ะะตัััั / ะปะพะณะธะบะฐ | ะะฐัััััะธะทะธััะตั ะทะฐะบะฐะท ะฒ ะพะฟัะธะผะฐะปัะฝัะน ะผะฐะณะฐะทะธะฝ |
| **Store[1..N]** | ะะตัััั ั ะพัะตัะตะดัั | ะฅัะฐะฝะธั ะธะฝะฒะตะฝัะฐัั, ัะพะฑะธัะฐะตั ะทะฐะบะฐะทั |
| **Courier[1..M]** | ะะตัััั | ะะฐะฑะธัะฐะตั ะทะฐะบะฐะท ะธ ะดะพััะฐะฒะปัะตั ะบะปะธะตะฝัั |
| **Customer** | ะะฐััะธะฒะฝัะน ะฐะณะตะฝั | ะัะธะฝะธะผะฐะตั ะธะปะธ ะพัะบะปะพะฝัะตั ะดะพััะฐะฒะบั |
| **SortingHub** | ะะตัััั | ะัะธะฝะธะผะฐะตั ะธ ะฟะตัะตัะฐัะฟัะตะดะตะปัะตั ะฒะพะทะฒัะฐัั |
| **StatsCollector** | ะะพะฝะธัะพั | ะกะพะฑะธัะฐะตั ะผะตััะธะบะธ |

---

### 1.3 ะะปะพะบ-ััะตะผะฐ ัะธััะตะผั

```mermaid
flowchart TD
    A([๐ค ะะปะธะตะฝั]) -- "ะะฐัะฒะบะฐ (SKU, ะฐะดัะตั, ะฟัะธะพัะธัะตั)" --> B[OrderGenerator\nะัะฐััะพะฝ ฮปยทt]

    B --> C{Dispatcher\nะฒัะฑะพั ะผะฐะณะฐะทะธะฝะฐ}

    C -- "ะะฐะทะฝะฐัะตะฝ Store 1" --> S1[๐ช Store 1\nะกะฑะพัะบะฐ ยท ะัะตัะตะดั]
    C -- "ะะฐะทะฝะฐัะตะฝ Store 2" --> S2[๐ช Store 2\nะกะฑะพัะบะฐ ยท ะัะตัะตะดั]
    C -- "ะะฐะทะฝะฐัะตะฝ Store N" --> SN[๐ช Store N\nะกะฑะพัะบะฐ ยท ะัะตัะตะดั]

    S1 & S2 & SN -- "ะะฐะบะฐะท ัะพะฑัะฐะฝ โ staging" --> CP[๐ด Courier Pool\n15 ะฟะฐัะฐะปะปะตะปัะฝัั ะฒะพัะบะตัะพะฒ]

    CP -- "ะะฒะธะถะตะฝะธะต ะบ ะบะปะธะตะฝัั\n(ะะพะณ-ะฝะพัะผะฐะปัะฝะพะต ะฒัะตะผั)" --> D{ะะปะธะตะฝั}

    D -- "ะัะธะฝััะพ โ" --> OK([DELIVERED])
    D -- "ะัะบะฐะท / ะัะฐะบ / ะะต ะดะพะผะฐ" --> R[ะะฑัะฐัะฝะฐั ะปะพะณะธััะธะบะฐ]

    R --> Q{ะัะดะฐ ะฒะตัะฝััั?}
    Q -- "P = 0.6: ะฑะปะธะถะฐะนัะธะน ะผะฐะณะฐะทะธะฝ" --> S1
    Q -- "P = 0.4: ัะพััะธัะพะฒะพัะฝัะน ัะฐะฑ" --> HUB[๐ญ SortingHub\nะะฝัะฟะตะบัะธั ยท ะะตัะตัะฐัะฟัะตะดะตะปะตะฝะธะต]

    HUB --> S1 & S2 & SN

    style OK fill:#2d6a4f,color:#fff
    style HUB fill:#457b9d,color:#fff
```

---

### 1.4 ะะธะฐะณัะฐะผะผะฐ ะฟะพัะพะบะพะฒ ะดะฐะฝะฝัั ะธ ะผะฐัะตัะธะฐะปะพะฒ

```mermaid
flowchart LR
    subgraph ะััะผะพะน ะฟะพัะพะบ
        O1[Order\nCREATED] --> O2[Order\nDISPATCHED] --> O3[Order\nASSEMBLING]
        O3 --> O4[Order\nREADY_FOR_PICKUP] --> O5[Order\nIN_TRANSIT] --> O6[Order\nDELIVERED]
    end

    subgraph ะะฑัะฐัะฝัะน ะฟะพัะพะบ
        O5 --> R1[Order\nRETURN_INITIATED] --> R2[Order\nRETURNING] --> R3[Order\nRESTOCKED]
    end

    subgraph ะะฝัะพัะผะฐัะธะพะฝะฝัะน ะฟะพัะพะบ
        S1[StatusLog\nTimestamp ยท State ยท Note] -.-> StatsCollector
        StatsCollector -.-> Metrics[๐ ะะตััะธะบะธ]
    end
```

---

## 2. ะัะฝะพะฒะฝัะต ะฟัะพัะตััั

### ะัะพัะตัั 1 โ ะะตะฝะตัะฐัะธั ะทะฐะบะฐะทะพะฒ (OrderGenerator)

| | |
|---|---|
| **ะัะพะด** | ะขะตะบััะตะต ะผะพะดะตะปัะฝะพะต ะฒัะตะผั `t`, ะฟะฐัะฐะผะตัั ะธะฝัะตะฝัะธะฒะฝะพััะธ `ฮป(t)` |
| **ะัะพัะตัั** | ะะตะฝะตัะฐัะธั ะธะฝัะตัะฒะฐะปะฐ ะดะพ ัะปะตะดัััะตะน ะทะฐัะฒะบะธ ะฟะพ ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝะพะผั ะทะฐะบะพะฝั. `ฮป(t)` ะฟะตัะตะบะปััะฐะตััั ะฟะพ ัะฐัะฟะธัะฐะฝะธั: ะฝะพัั โ ัััะพ โ ะฟะธะบ ะพะฑะตะดะฐ โ ะดะตะฝั โ ะฒะตัะตัะฝะธะน ะฟะธะบ |
| **ะััะพะด** | ะะฑัะตะบั `Order{ID, Items[], AddressID, Priority, CreatedAt}` ะฟะพะผะตัะฐะตััั ะฒ ะบะฐะฝะฐะป ะดะธัะฟะตััะตัะฐ |

```
ะกะพะทะดะฐัั ะทะฐะบะฐะท
    โ
ะัะฑัะฐัั ฮป(t) ะฟะพ ัะตะบััะตะผั ัะฐัั
    โ
ะกะณะตะฝะตัะธัะพะฒะฐัั ฯ ~ Exp(ฮป)
    โ
ะะดะฐัั ฯ ะผะธะฝัั
    โ
ะัะฟัะฐะฒะธัั Order โ dispatcher_channel
    โ (ัะธะบะป)
```

---

### ะัะพัะตัั 2 โ ะะธัะฟะตััะตัะธะทะฐัะธั (Dispatcher)

| | |
|---|---|
| **ะัะพะด** | ะะพะฒัะน `Order`, ัะฐะฑะปะธัะฐ ะดะพัััะฟะฝะพััะธ ะธะฝะฒะตะฝัะฐัั ะฟะพ ะผะฐะณะฐะทะธะฝะฐะผ, ะบะพะพัะดะธะฝะฐัั ัะทะปะพะฒ |
| **ะัะพัะตัั** | 1. ะะฐะนัะธ ะฒัะต ะผะฐะณะฐะทะธะฝั, ะธะผะตััะธะต ะฒัะต ัะพะฒะฐัั ะทะฐะบะฐะทะฐ. 2. ะะฐัััะธัะฐัั score = `wโ / dist + wโ ยท avail_ratio`. 3. ะะฐะทะฝะฐัะธัั ะผะฐะณะฐะทะธะฝ ั max score. 4. ะัะปะธ ะฝะธ ะพะดะธะฝ ะผะฐะณะฐะทะธะฝ ะฝะต ะธะผะตะตั ะฟะพะปะฝะพะณะพ ะฝะฐะฑะพัะฐ โ ัะฐะทะฑะธัั ะทะฐะบะฐะท ะฝะฐ ัะฐััะธ ะธะปะธ ะพัะฟัะฐะฒะธัั ะฒ ัะฐะฑ. |
| **ะััะพะด** | `Order.StoreID` ะทะฐะฟะพะปะฝะตะฝ; Order ะพัะฟัะฐะฒะปะตะฝ ะฒ `store[i].assemblyQueue` |

```
Order ะฟัะธะฝัั
    โ
ะะปั ะบะฐะถะดะพะณะพ Store_i:
  HasItems(order.Items) โ {eligible}
    โ
score_i = w1/dist(addr, store_i) + w2*availRatio_i
    โ
bestStore = argmax(score_i)
    โ
order.StoreID = bestStore.ID
    โ
bestStore.assemblyQueue โ order
```

---

### ะัะพัะตัั 3 โ ะกะฑะพัะบะฐ ะทะฐะบะฐะทะฐ (Store Assembly)

| | |
|---|---|
| **ะัะพะด** | `Order` ะธะท ะพัะตัะตะดะธ ัะฑะพัะบะธ, ัะฒะพะฑะพะดะฝัะน ัะปะพั ัะฑะพัะบะธ |
| **ะัะพัะตัั** | ะกะธะผัะปะธััะตััั ะฟะฐัะฐะปะปะตะปัะฝะพ ะดะปั ะบะฐะถะดะพะณะพ ัะปะพัะฐ. ะัะตะผั ัะฑะพัะบะธ `T_asm ~ N(ฮผ=15ะผะธะฝ, ฯ=4ะผะธะฝ)` ัะฒะตะปะธัะธะฒะฐะตััั ะฟัะพะฟะพััะธะพะฝะฐะปัะฝะพ ััะผะผะฐัะฝะพะผั ะฒะตัั ัะพะฒะฐัะพะฒ. ะัะพะฒะตัะบะฐ ะบะฐัะตััะฒะฐ ั ะฒะตัะพััะฝะพัััั ะฑัะฐะบะฐ `p_defect = 0.02`. |
| **ะััะพะด** | `Order` ะฟะตัะตัะพะดะธั ะฒ `READY_FOR_PICKUP` โ ะฟะพะผะตัะฐะตััั ะฒ staging area ะบัััะตััะบะพะณะพ ะฟัะปะฐ |

```
ะะพะปััะธัั Order ะธะท assemblyQueue
    โ
ะะฐะฝััั ัะปะพั ัะฑะพัะบะธ
    โ
ะะฐัะตะทะตัะฒะธัะพะฒะฐัั ะธะฝะฒะตะฝัะฐัั
    โ
T_asm = max(1, Normal(15, 4)) ร weight_factor
    โ
ะะดะฐัั T_asm ะผะธะฝ
    โ
ะะพะฝััะพะปั ะบะฐัะตััะฒะฐ: Bernoulli(p_defect)?
  ะะฐ โ ะพัะผะตัะธัั ะดะตัะตะบั โ ะธะฝะธัะธะธัะพะฒะฐัั ะฒะพะทะฒัะฐั
  ะะตั โ Order.Status = READY_FOR_PICKUP
    โ
ะัะฒะพะฑะพะดะธัั ัะปะพั ัะฑะพัะบะธ
    โ
courierPool.stagingArea โ Order
```

---

### ะัะพัะตัั 4 โ ะะพััะฐะฒะบะฐ ะบัััะตัะพะผ (Courier Delivery)

| | |
|---|---|
| **ะัะพะด** | `Order` ะฒ staging area, ัะฒะพะฑะพะดะฝัะน ะบัััะตั |
| **ะัะพัะตัั** | ะัััะตั ะทะฐะฑะธัะฐะตั ะฑะปะธะถะฐะนัะธะน ะทะฐะบะฐะท ะธะท staging. ะะฒะธะถะตะฝะธะต ะพะฟะธััะฒะฐะตััั ะดะฒัะผั ะพััะตะทะบะฐะผะธ: **ะผะฐะณะฐะทะธะฝ โ ะบะปะธะตะฝั**. ะัะตะผั = `dist / speed ร traffic_factor`. `traffic_factor ~ LogNormal(0, 0.35)`. ะก ะฒะตัะพััะฝะพัััั `ฮป_breakdown ร dt` ะบัััะตั ะปะพะผะฐะตััั ะธ ะพััะฐะฝะฐะฒะปะธะฒะฐะตััั ะฝะฐ `T_repair ~ Exp(30ะผะธะฝ)`. |
| **ะััะพะด** | ะัััะตั ะฟัะธะฑัะฒะฐะตั ะบ ะบะปะธะตะฝัั โ ะฟะตัะตะดะฐัะฐ ะฒ **ะัะพัะตัั 5** |

```
ะะถะธะดะฐัั ะทะฐะบะฐะท ะฒ stagingArea
    โ
ะัะฑัะฐัั ะฑะปะธะถะฐะนัะธะน Order
Order.CourierID = courier.ID
    โ
ะะฒะธะถะตะฝะธะต: store โ customer
  T_travel = dist / speed ร LogNormal(0, ฯ_traffic)
  ะ ะฟััะธ: ะฟัะพะฒะตัััั breakdown ั ฮป_b
    โ ะตัะปะธ breakdown: ะถะดะฐัั T_repair, ะฟัะพะดะพะปะถะธัั
    โ
ะัะธะฑััั ะบ ะบะปะธะตะฝัั
    โ
โ ะัะพัะตัั 5
```

---

### ะัะพัะตัั 5 โ ะะทะฐะธะผะพะดะตะนััะฒะธะต ั ะบะปะธะตะฝัะพะผ

| | |
|---|---|
| **ะัะพะด** | ะัััะตั ั ะดะฒะตัะธ ะบะปะธะตะฝัะฐ |
| **ะัะพัะตัั** | ะขัะธ ะฒะตัะบะธ: (A) ะบะปะธะตะฝั ะฟัะธะฝะธะผะฐะตั โ ะบะพะฝะตั ะฟััะผะพะณะพ ะฟะพัะพะบะฐ. (B) ะบะปะธะตะฝั ะฝะต ะดะพะผะฐ โ ะถะดะฐัั ะดะพ 3 ั, ะฟะพะฒัะพัะฝะฐั ะฟะพะฟััะบะฐ (ะผะฐะบั. 2 ะฟะพะฟััะบะธ). (C) ะบะปะธะตะฝั ะพัะบะฐะทัะฒะฐะตััั / ะพะฑะฝะฐััะถะตะฝ ะฑัะฐะบ โ ะธะฝะธัะธะธัะพะฒะฐัั ะฒะพะทะฒัะฐั. ะะตัะพััะฝะพััั ะฒะพะทะฒัะฐัะฐ ัะฐัััั ั ะพะฟะพะทะดะฐะฝะธะตะผ: `p_ret(delay) = pโ ร (1 + ฮฑ ร delay_ratio)` |
| **ะััะพะด** | `DELIVERED` ะธะปะธ `RETURN_INITIATED` |

```
ะัััะตั ั ะบะปะธะตะฝัะฐ
    โ
Bernoulli(p_not_home)?
  ะะฐ โ ะถะดะฐัั Uniform[1ั, 4ั] โ ะฟะพะฒัะพัะฝะฐั ะฟะพะฟััะบะฐ (ะผะฐะบั 2)
       ะฟะพัะปะต 2 ะฝะตัะดะฐั โ CANCELLED
    โ
ะะปะธะตะฝั ะฟัะพะฒะตััะตั ะทะฐะบะฐะท:
  delay_ratio = max(0, (actual - expected) / expected)
  p_ret = p_base ร (1 + ฮฑ ร delay_ratio)
  Bernoulli(p_ret)?
    ะะฐ โ ReturnReason := {Refused|Defective|WrongItem|Late}
         โ RETURN_INITIATED
    ะะตั โ DELIVERED โ
```

---

### ะัะพัะตัั 6 โ ะะฑัะฐัะฝะฐั ะปะพะณะธััะธะบะฐ (Return Processing)

| | |
|---|---|
| **ะัะพะด** | `Order` ะฒ ััะฐัััะต `RETURN_INITIATED`, `ReturnReason`, ัะพััะพัะฝะธะต ัะพะฒะฐัะฐ |
| **ะัะพัะตัั** | ะะฐัััััะธะทะฐัะธั ะฒะพะทะฒัะฐัะฐ: ั ะฒะตัะพััะฝะพัััั 0.6 โ ะฒ ะฑะปะธะถะฐะนัะธะน ะธััะพะดะฝัะน ะผะฐะณะฐะทะธะฝ, ั 0.4 โ ะฒ ัะพััะธัะพะฒะพัะฝัะน ัะฐะฑ. ะัััะตั ะฒะตะทัั ัะพะฒะฐั ะพะฑัะฐัะฝะพ. ะะฝัะฟะตะบัะธั ะฝะฐ ะผะตััะต: `T_inspect ~ Exp(10ะผะธะฝ)`. ะะพ ะธัะพะณั: ะฒะพัััะฐะฝะพะฒะปะตะฝ ะฒ ะธะฝะฒะตะฝัะฐัั ะธะปะธ ะพัะฟัะฐะฒะปะตะฝ ะฝะฐ ััะธะปะธะทะฐัะธั (ะฟัะธ ะบัะธัะธัะตัะบะพะผ ะฑัะฐะบะต). |
| **ะััะพะด** | ะะฝะฒะตะฝัะฐัั ะผะฐะณะฐะทะธะฝะฐ / ัะฐะฑะฐ ะฟะพะฟะพะปะฝะตะฝ; ะผะตััะธะบะธ ะฒะพะทะฒัะฐัะฐ ะทะฐะฟะธัะฐะฝั |

```
Order.Status = RETURN_INITIATED
    โ
ะัะตะฝะธัั ะฟัะธัะธะฝั ะฒะพะทะฒัะฐัะฐ
    โ
ะะตัะตะฝะธะต ะพ ะผะฐัััััะต:
  Bernoulli(0.6)? โ originalStore
                  โ sortingHub
    โ
ะัััะตั: customer โ destination
  T_return = dist / speed ร traffic_factor
    โ
ะะฝัะฟะตะบัะธั: T_inspect ~ Exp(10ะผะธะฝ)
    โ
ะะพัััะฐะฝะพะฒะธัั? (ะตัะปะธ ะฝะต ะบัะธัะธัะตัะบะธะน ะฑัะฐะบ)
  ะะฐ โ Store.Inventory[SKU]++
       Order.Status = RESTOCKED
  ะะตั โ ััะธะปะธะทะฐัะธั
    โ
StatsCollector.RecordReturn(duration)
```

---

## 3. ะัะฟะพะปัะทัะตะผัะต ัะฐัะฟัะตะดะตะปะตะฝะธั

| ะะฐัะฟัะตะดะตะปะตะฝะธะต | ะัะธะผะตะฝะตะฝะธะต | ะะฐัะฐะผะตััั | ะะฑะพัะฝะพะฒะฐะฝะธะต |
|---|---|---|---|
| **ะัะฐััะพะฝะพะฒัะบะธะน ะฟัะพัะตัั** (ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝัะต ะธะฝัะตัะฒะฐะปั) | ะะพัััะฟะปะตะฝะธะต ะทะฐะบะฐะทะพะฒ | ฮป(t): ะฝะพัั 2/ั, ัััะพ 8/ั, ะฟะธะบ 15/ั | ะะฐะบะฐะทั โ ะฝะตะทะฐะฒะธัะธะผัะต ัะปััะฐะนะฝัะต ัะพะฑััะธั ะฑะตะท ะฟะฐะผััะธ. ะฏะฒะปัะตััั ััะฐะฝะดะฐััะพะผ ะฒ ัะตะพัะธะธ ะผะฐััะพะฒะพะณะพ ะพะฑัะปัะถะธะฒะฐะฝะธั (ะพัะตัะตะดะธ M/M/c). ะะพะดัะฒะตัะถะดะตะฝะพ ัะตะฐะปัะฝัะผะธ ะดะฐะฝะฝัะผะธ e-commerce ะฟะปะฐััะพัะผ [1]. |
| **ะะพัะผะฐะปัะฝะพะต N(ฮผ, ฯยฒ)** | ะัะตะผั ัะฑะพัะบะธ ะทะฐะบะฐะทะฐ | ฮผ=15 ะผะธะฝ, ฯ=4 ะผะธะฝ | ะกะฑะพัะบะฐ ัะบะปะฐะดัะฒะฐะตััั ะธะท ะผะฝะพะถะตััะฒะฐ ะผะตะปะบะธั ะฝะตะทะฐะฒะธัะธะผัั ะพะฟะตัะฐัะธะน (ะฆะะข โ ะฝะพัะผะฐะปัะฝะพะต). ะัะฐะฒะพััะพัะพะฝะฝะธะต ัะฒะพััั ะพะณัะฐะฝะธัะตะฝั ะผะธะฝะธะผะฐะปัะฝัะผ ะทะฝะฐัะตะฝะธะตะผ min=1 ะผะธะฝ. |
| **ะะพะณ-ะฝะพัะผะฐะปัะฝะพะต LN(ฮผ_ln, ฯ_ln)** | ะขัะฐะฝัะฟะพััะฝัะน ะบะพัััะธัะธะตะฝั ะทะฐะดะตัะถะบะธ (ะฟัะพะฑะบะธ) | ฮผ_ln=0, ฯ_ln=0.35 | ะัะตะผั ะดะฒะธะถะตะฝะธั ัััะพะณะพ ะฟะพะปะพะถะธัะตะปัะฝะพ, ะธะผะตะตั ะฟัะฐะฒัะน ัะฒะพัั (ะฟัะพะฑะบะธ, ะะขะ). ะัะพะธะทะฒะตะดะตะฝะธะต ะฝะตะทะฐะฒะธัะธะผัั ัะปััะฐะนะฝัั ะผะฝะพะถะธัะตะปะตะน (ะฟะตัะตะบััััะบะธ, ัะธะณะฝะฐะปั) โ ะปะพะณ-ะฝะพัะผะฐะปัะฝะพะต [2]. ะะตะดะธะฐะฝะฐ โ 1 (ะฑะตะท ะทะฐะดะตัะถะบะธ), 95-ะน ะฟะตััะตะฝัะธะปั โ 1.8ร ะฑะฐะทะพะฒะพะณะพ ะฒัะตะผะตะฝะธ. |
| **ะะตัะฝัะปะปะธ Bern(p)** | ะัะบะฐะท ะบะปะธะตะฝัะฐ ะพั ะทะฐะบะฐะทะฐ | p = pโร(1+ฮฑรdelay_ratio) | ะะธะฝะฐัะฝัะน ะธััะพะด: ะฟัะธะฝััั/ะพัะบะฐะทะฐัััั. ะะตัะพััะฝะพััั ะฝะตะปะธะฝะตะนะฝะพ ัะฐัััั ั ะพะฟะพะทะดะฐะฝะธะตะผ, ััะพ ะพััะฐะถะฐะตั ะฝะฐะบะพะฟะปะตะฝะธะต ัะฐะทะดัะฐะถะตะฝะธั ะบะปะธะตะฝัะฐ. |
| **ะะตัะฝัะปะปะธ Bern(p)** | ะะปะธะตะฝั ะฝะต ะดะพะผะฐ | p = 0.15 | ะะตะทะฐะฒะธัะธะผะพะต ะฑะธะฝะฐัะฝะพะต ัะพะฑััะธะต. ะะฝะฐัะตะฝะธะต 15% ัะพะพัะฒะตัััะฒัะตั ะพััะฐัะปะตะฒัะผ ะดะฐะฝะฝัะผ ะบัััะตััะบะธั ัะปัะถะฑ. |
| **ะัะฐััะพะฝ** | ะะพะปะพะผะบะธ ะบัััะตัะพะฒ | ฮป = 0.1 ะฟะพะปะพะผะบะธ/ะบัััะตั/ัััะบะธ | ะะพะปะพะผะบะธ โ ัะตะดะบะธะต ะฝะตะทะฐะฒะธัะธะผัะต ัะพะฑััะธั โ ะฟัะฐััะพะฝะพะฒัะบะธะน ะฟะพัะพะบ. |
| **ะญะบัะฟะพะฝะตะฝัะธะฐะปัะฝะพะต Exp(ฮป)** | ะัะตะผั ัะตะผะพะฝัะฐ ะบัััะตัะฐ | ฮผ_repair = 30 ะผะธะฝ | ะะตะผะพัะธะฐะปัะฝะพะต ัะฒะพะนััะฒะพ: ะพััะฐะฒัะตะตัั ะฒัะตะผั ัะตะผะพะฝัะฐ ะฝะต ะทะฐะฒะธัะธั ะพั ัะถะต ะฟัะพัะตะดัะตะณะพ. ะกัะฐะฝะดะฐัั ะดะปั ะฒัะตะผะตะฝะธ ะพะฑัะปัะถะธะฒะฐะฝะธั ะฒ ัะธััะตะผะฐั M/M/1. |
| **ะญะบัะฟะพะฝะตะฝัะธะฐะปัะฝะพะต Exp(ฮป)** | ะะฝัะฟะตะบัะธั ะฒะพะทะฒัะฐัะฐ | ฮผ_inspect = 10 ะผะธะฝ | ะะฝะฐะปะพะณะธัะฝะพ: ะฒัะตะผั ะธะฝัะฟะตะบัะธะธ โ ะฟัะพัะตัั ั ัะบัะฟะพะฝะตะฝัะธะฐะปัะฝัะผะธ ะพะถะธะดะฐะฝะธัะผะธ, ะทะฐะฒะธัััะธะน ะพั ะฟะตัะฒะพะณะพ ะพะฑะฝะฐััะถะตะฝะธั ะดะตัะตะบัะฐ. |
| **ะะฐะฒะฝะพะผะตัะฝะพะต U(a, b)** | ะะถะธะดะฐะฝะธะต ะฟะพะฒัะพัะฝะพะน ะดะพััะฐะฒะบะธ | U(60, 240 ะผะธะฝ) | ะะปะธะตะฝั ะผะพะถะตั ะพัะฒะพะฑะพะดะธัััั ะฒ ะปัะฑะพะน ะผะพะผะตะฝั 1-4 ัะฐัะพะฒะพะณะพ ะพะบะฝะฐ ั ัะฐะฒะฝะพะน ะฒะตัะพััะฝะพัััั โ ะฝะตั ะพัะฝะพะฒะฐะฝะธะน ะฟัะตะดะฟะพัะตััั ะบะฐะบะพะน-ะปะธะฑะพ ะผะพะผะตะฝั. |

---

## 4. ะะฐัะฐะผะตััั ะผะพะดะตะปะธ

### 4.1 ะัะพะดะฝัะต ะฟะฐัะฐะผะตััั

| ะะฐัะฐะผะตัั | ะะฑะพะทะฝ. | ะะฐะทะพะฒะพะต ะทะฝะฐัะตะฝะธะต | ะััะพัะฝะธะบ / ะพะฑะพัะฝะพะฒะฐะฝะธะต |
|---|---|---|---|
| ะะพะปะธัะตััะฒะพ ะผะฐะณะฐะทะธะฝะพะฒ | N_stores | 4 | ะขะธะฟะธัะฝัะน ะผะฐะปัะน ะผะฐัะบะตัะฟะปะตะนั ะฒ ะณะพัะพะดะต-ะผะธะปะปะธะพะฝะฝะธะบะต |
| ะะพะปะธัะตััะฒะพ ะบัััะตัะพะฒ | N_couriers | 15 | ะััะฐัะปะตะฒะฐั ะฝะพัะผะฐ ~1 ะบัััะตั ะฝะฐ 10โ15 ะทะฐะบะฐะทะพะฒ/ัะฐั ะฒ ะฟะธะบ [3] |
| ะะพะปะธัะตััะฒะพ ัะพััะธัะพะฒะพัะฝัั ัะฐะฑะพะฒ | N_hubs | 1 | ะะดะธะฝ ัะตะฝััะฐะปัะฝัะน ัะฐะฑ ะดะปั ะณะพัะพะดะฐ |
| ะะฝัะตะฝัะธะฒะฝะพััั ะทะฐะบะฐะทะพะฒ (ะฟะธะบ) | ฮป_peak | 15 ะทะฐะบะฐะทะพะฒ/ัะฐั | ะะธะบะพะฒะฐั ะฝะฐะณััะทะบะฐ 12:00โ14:00, 19:00โ22:00 |
| ะะฝัะตะฝัะธะฒะฝะพััั ะทะฐะบะฐะทะพะฒ (ะฒะฝะต ะฟะธะบะฐ) | ฮป_off | 2 ะทะฐะบะฐะทะฐ/ัะฐั | ะะพัะฝะพะต ะฒัะตะผั |
| ะกัะตะดะฝะตะต ะฒัะตะผั ัะฑะพัะบะธ | ฮผ_asm | 15 ะผะธะฝ | ะกัะตะดะฝะตะต ะดะปั ััะฐะฝะดะฐััะฝะพะณะพ ะทะฐะบะฐะทะฐ 2โ3 SKU |
| ะกะะ ะฒัะตะผะตะฝะธ ัะฑะพัะบะธ | ฯ_asm | 4 ะผะธะฝ | |
| ะะผะบะพััั ะพัะตัะตะดะธ ัะบะปะฐะดะฐ | Q_max | 50 ะทะฐะบะฐะทะพะฒ | ะคะธะทะธัะตัะบะธะน ะปะธะผะธั staging-ะทะพะฝั |
| ะกัะตะดะฝัั ัะบะพัะพััั ะบัััะตัะฐ | v_mean | 25 ะบะผ/ั | ะะพัะพะดัะบะฐั ะดะพััะฐะฒะบะฐ ะฝะฐ ะฒะตะปะพัะธะฟะตะดะต/ะผะพัะพัะธะบะปะต |
| ะกะะ ัะบะพัะพััะธ ะบัััะตัะฐ | v_std | 5 ะบะผ/ั | |
| ะะฐัะฐะผะตัั ััะฐัะธะบะฐ (ะปะพะณ-ะฝะพัะผ.) | ฯ_traffic | 0.35 | |
| ะะฝัะตะฝัะธะฒะฝะพััั ะฟะพะปะพะผะพะบ | ฮป_breakdown | 0.1/ัััะบะธ/ะบัััะตั | |
| ะกัะตะดะฝะตะต ะฒัะตะผั ัะตะผะพะฝัะฐ | ฮผ_repair | 30 ะผะธะฝ | |
| ะะตัะพััะฝะพััั ะพััััััะฒะธั ะบะปะธะตะฝัะฐ | p_not_home | 0.15 | |
| ะะฐะทะพะฒะฐั ะฒะตัะพััะฝะพััั ะฒะพะทะฒัะฐัะฐ | pโ_return | 0.08 | E-commerce ััะตะดะฝะธะน ะฟะพะบะฐะทะฐัะตะปั ะฟะพ ะะค ~8% [4] |
| ะะพัััะธัะธะตะฝั ััะฒััะฒะธัะตะปัะฝะพััะธ ะบ ะทะฐะดะตัะถะบะต | ฮฑ | 0.5 | |
| ะะพะปั ะฒะพะทะฒัะฐัะพะฒ ะฒ ะผะฐะณะฐะทะธะฝ (vs ัะฐะฑ) | p_store_ret | 0.60 | |
| ะกัะตะดะฝะตะต ะฒัะตะผั ะธะฝัะฟะตะบัะธะธ | ฮผ_inspect | 10 ะผะธะฝ | |
| ะะปะธัะตะปัะฝะพััั ัะธะผัะปััะธะธ | T_sim | 24 ัะฐัะฐ | ะกััะพัะฝัะน ัะธะบะป |

**ะัะธะผะตัะฐะฝะธั ะฟะพ ะธััะพัะฝะธะบะฐะผ:**
- [1] ะขะตะพัะธั ะผะฐััะพะฒะพะณะพ ะพะฑัะปัะถะธะฒะฐะฝะธั: ะฟะพัะพะบ ะัะฐััะพะฝะฐ ะดะปั ะฒะตะฑ-ะทะฐะบะฐะทะพะฒ โ ััะฐะฝะดะฐัั Erlang C.
- [2] Lognormal model for travel time: Rakha et al., "Reliability of Freeway Travel Times" (2006).
- [3] ะะฐะฝะฝัะต Delivery Club ะธ ะฏะฝะดะตะบั.ะะพััะฐะฒะบะธ (ะฟัะฑะปะธัะฝัะต ะพััััั, 2023).
- [4] Data Insight ยซะัะฝะพะบ eCommerce ะฒ ะะพััะธะธยป, 2024: ััะตะดะฝะธะน returns rate FMCG ~8%.

---

### 4.2 ะฃัะปะพะฒะธั ะธ ะฟัะตะดะฟะพะปะพะถะตะฝะธั

| ะัะตะดะฟะพะปะพะถะตะฝะธะต | ะะฑะพัะฝะพะฒะฐะฝะธะต |
|---|---|
| ะัะฐั ะณะพัะพะดะฐ ะดะธัะบัะตัะธะทะธััะตััั ะฒ **50 ัะทะปะพะฒ** ั ะผะฐััะธัะตะน ัะฐัััะพัะฝะธะน | ะฃะฟัะพัะฐะตั ะผะฐัััััะธะทะฐัะธั ะฑะตะท ะฟะพัะตัะธ ัะตะฐะปะธะทะผะฐ |
| ะัััะตั ะพะฑัะปัะถะธะฒะฐะตั **ะพะดะธะฝ ะทะฐะบะฐะท** ะทะฐ ัะฐะท | ะกะพะพัะฒะตัััะฒัะตั ะผะพะดะตะปะธ ยซัะบัะฟัะตัั ะดะพััะฐะฒะบะธยป (ะฝะต batch) |
| ะะฝะฒะตะฝัะฐัั ะผะฐะณะฐะทะธะฝะพะฒ ะทะฐะดะฐัััั ะฝะฐัะฐะปัะฝัะผะธ ััะปะพะฒะธัะผะธ ะธ ะฝะต ะฟะพะฟะพะปะฝัะตััั | ะคะพะบัั ะฝะฐ ะปะพะณะธััะธะบะต, ะฐ ะฝะต supply-chain ะฒ ัะตะปะพะผ |
| ะะฐะบะฐะทั ะฝะต ัะฐะทะดะตะปััััั ะฟะพ ะผะฐะณะฐะทะธะฝะฐะผ โ ะฒะตัั ะทะฐะบะฐะท ะธะท ะพะดะฝะพะณะพ ะธััะพัะฝะธะบะฐ | ะฃะฟัะพัะตะฝะธะต ะดะปั ะฟะตัะฒะพะน ะฒะตััะธะธ ะผะพะดะตะปะธ |
| ะัะตะผั ัััะพะบ ะฒะปะธัะตั ัะพะปัะบะพ ะฝะฐ `ฮป(t)` ะธ `ฯ_traffic(t)` | ะััะณะธะต ะฟะฐัะฐะผะตััั ััะฐะฑะธะปัะฝั ะฒ ัะตัะตะฝะธะต ะดะฝั |
| ะะพะทะฒัะฐั ะฒัะตะณะดะฐ ัะธะทะธัะตัะบะธ ะฒะพะทะผะพะถะตะฝ | ะัััะตั ะพััะฐัััั ะดะพัััะฟะฝัะผ ะฟะพัะปะต ะพัะบะฐะทะฐ ะบะปะธะตะฝัะฐ |

---

## 5. ะะตะทัะปััะฐัั ะผะพะดะตะปะธัะพะฒะฐะฝะธั

### 5.1 ะะถะธะดะฐะตะผัะต ัะตะทัะปััะฐัั

#### ะะปััะตะฒัะต ะผะตััะธะบะธ

| ะะตััะธะบะฐ | ะะถะธะดะฐะตะผะพะต ะทะฝะฐัะตะฝะธะต (ะฑะฐะทะพะฒัะน ััะตะฝะฐัะธะน) | ะะดะธะฝะธัะฐ |
|---|---|---|
| ะกัะตะดะฝะตะต ะฒัะตะผั ะดะพััะฐะฒะบะธ (order-to-door) | 45โ75 | ะผะธะฝ |
| ะกัะตะดะฝะตะต ะฒัะตะผั ะพะฑัะฐะฑะพัะบะธ ะฒะพะทะฒัะฐัะฐ | 60โ120 | ะผะธะฝ |
| ะฃัะธะปะธะทะฐัะธั ะบัััะตัะพะฒ | 55โ75 | % |
| ะกัะตะดะฝัั ะดะปะธะฝะฐ ะพัะตัะตะดะธ ัะบะปะฐะดะฐ | 5โ15 | ะทะฐะบะฐะทะพะฒ |
| ะะธะบะพะฒะฐั ะดะปะธะฝะฐ ะพัะตัะตะดะธ ัะบะปะฐะดะฐ | 30โ50 | ะทะฐะบะฐะทะพะฒ |
| ะะพะปั ััะฟะตัะฝัั ะดะพััะฐะฒะพะบ | 85โ90 | % |
| ะะพะปั ะฒะพะทะฒัะฐัะพะฒ | 8โ13 | % |
| ะัะพะฟััะบะฝะฐั ัะฟะพัะพะฑะฝะพััั | 10โ13 | ะทะฐะบะฐะทะพะฒ/ัะฐั |

#### ะกัะฐะฒะฝะธะฒะฐะตะผัะต ััะตะฝะฐัะธะธ

| ะกัะตะฝะฐัะธะน | ะะทะผะตะฝะตะฝะธั | ะฆะตะปั |
|---|---|---|
| **Default** | ะะฐะทะพะฒัะต ะฟะฐัะฐะผะตััั | ะญัะฐะปะพะฝ |
| **Peak Load** | ฮป_peak ร 2.5, N_couriers = 25 | ะะฝะฐะปะธะท ะฟะธะบะพะฒัั ะฝะฐะณััะทะพะบ |
| **Chaos** | ฮป_breakdown ร 5, ฯ_traffic ร 2 | ะฃััะพะนัะธะฒะพััั ะบ ัะฑะพัะผ |
| **Understaffed** | N_couriers = 8 | ะะธะถะฝัั ะณัะฐะฝะธัะฐ ัะตััััะพะฒ |

#### ะะถะธะดะฐะตะผะฐั ะดะธะฝะฐะผะธะบะฐ ะพัะตัะตะดะธ ัะบะปะฐะดะฐ (ัััะพัะฝัะน ะฟัะพัะธะปั)

```
ะะปะธะฝะฐ ะพัะตัะตะดะธ
50 | ยทยทยทยทยทยทยทยทยทยทยทยทยทยทยทโยทยทยทยทยทยทยทยทยทยทยทยทยทโยทยทยทยทยทยทยทยทยทยทยทยทยท
40 |                โโ            โโโโ
30 |               โโโโ          โโโโโโ
20 |          โโ  โโโโโโ    โโ  โโโโโโโโ
10 | โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
 0 +------------------------------------------โ ะัะตะผั
   0ั   3ั   6ั   9ั  12ั  15ั  18ั  21ั  24ั
                  ^ะฟะธะบ ะพะฑะตะด        ^ะฒะตัะตัะฝะธะน ะฟะธะบ
```

---

### 5.2 ะัะตะดะฟะพะปะฐะณะฐะตะผัะต ัะฟะพัะพะฑั ะฐะฝะฐะปะธะทะฐ ัะตะทัะปััะฐัะพะฒ

#### A. ะะฝะฐะปะธะท ัะทะบะธั ะผะตัั (Bottleneck Analysis)
- ะกััะพะธััั **ะณัะฐั ะทะฐะณััะทะบะธ**: ัะฑะพัะบะฐ โ ะบัััะตััะบะธะน ะฟัะป โ ัะพััะธัะพะฒะพัะฝัะน ัะฐะฑ
- ะะพะผะฟะพะฝะตะฝั ั ะผะฐะบัะธะผะฐะปัะฝะพะน ะดะปะธะฝะพะน ะพัะตัะตะดะธ = ัะทะบะพะต ะผะตััะพ
- **ะะถะธะดะฐะตััั:** ะฟัะธ ฮป > 12 ะทะฐะบะฐะทะพะฒ/ัะฐั ัะบะปะฐะด ััะฐะฝะพะฒะธััั ัะทะบะธะผ ะผะตััะพะผ, ะฟัะธ ฮป > 20 โ ะบัััะตััะบะธะน ะฟัะป

#### B. ะะฝะฐะปะธะท ััะฒััะฒะธัะตะปัะฝะพััะธ
- ะะฐััะธััะตะผ ะฟะพ ะพะดะฝะพะผั ะฟะฐัะฐะผะตััั ะฟัะธ ะฟัะพัะธั ัะฐะฒะฝัั:
  - `N_couriers` โ {8, 12, 15, 20, 25} โ ะฒะปะธัะฝะธะต ะฝะฐ ะฒัะตะผั ะดะพััะฐะฒะบะธ
  - `Q_max` โ {20, 50, 100} โ ะฒะปะธัะฝะธะต ะฝะฐ ะฟะพัะตัะธ ะฟัะธ ะฟะตัะตะฟะพะปะฝะตะฝะธะธ
  - `pโ_return` โ {0.05, 0.10, 0.20} โ ะฒะปะธัะฝะธะต ะฝะฐ ะฟัะพะฟััะบะฝัั ัะฟะพัะพะฑะฝะพััั ะพะฑัะฐัะฝะพะณะพ ะฟะพัะพะบะฐ

#### C. ะกัะฐะฒะฝะตะฝะธะต ั ะฐะฝะฐะปะธัะธัะตัะบะพะน ะผะพะดะตะปัั (ะฒะฐะปะธะดะฐัะธั)
- ะััะผะพะน ะฟะพัะพะบ ะฟัะธ ะฟะพััะพัะฝะฝะพะน ะฝะฐะณััะทะบะต โ ะผะพะดะตะปั **M/M/c** (Erlang C):
  - `c` = N_couriers, `ฮป` = ฮป_peak, `ฮผ` = 1/avg_delivery_time
  - ะกัะฐะฒะฝะธะฒะฐะตะผ `E[W]` (ััะตะดะฝะตะต ะพะถะธะดะฐะฝะธะต ะฒ ะพัะตัะตะดะธ) ะธะท ัะพัะผัะปั ะญัะปะฐะฝะณะฐ ั ัะตะทัะปััะฐัะฐะผะธ ัะธะผัะปััะธะธ
  - ะะพะฟัััะธะผะพะต ัะฐััะพะถะดะตะฝะธะต: โค 10%

#### D. ะะฝัะตัะฟัะตัะฐัะธั ะฒ ะฑะธะทะฝะตั-ัะตัะผะธะฝะฐั
| ะะตััะธะบะฐ | ะัะปะธ ััะถะต ะฝะพัะผั | ะะตะบะพะผะตะฝะดะฐัะธั |
|---|---|---|
| ะัะตะผั ะดะพััะฐะฒะบะธ > 90 ะผะธะฝ | ะะปะธะตะฝัั ะฝะฐัะฝัั ะพัะผะตะฝััั | ะะพะฑะฐะฒะธัั ะบัััะตัะพะฒ ะธะปะธ ะพัะบัััั ะดะพะฟะพะปะฝะธัะตะปัะฝัะน ะผะฐะณะฐะทะธะฝ |
| ะฃัะธะปะธะทะฐัะธั ะบัััะตัะพะฒ > 90% | ะะตะณัะฐะดะฐัะธั ะบะฐัะตััะฒะฐ, ัะพัั ะฒะพะทะฒัะฐัะพะฒ | ะะฐััะธัะธัั ะบัััะตััะบะธะน ะฟัะป ะดะพ ะฟะธะบะพะฒะพะณะพ ฮป/ฮผ |
| ะัะตัะตะดั ัะบะปะฐะดะฐ โ Q_max | ะะพัะตัะธ ะทะฐะบะฐะทะพะฒ ะฟัะธ ะฟะตัะตะฟะพะปะฝะตะฝะธะธ | ะฃะฒะตะปะธัะธัั ัะฑะพัะพัะฝัะต ะผะพัะฝะพััะธ ะธะปะธ ะฒะฒะตััะธ ะฟัะธะพัะธัะตัั |
| ะะพะทะฒัะฐัั > 15% | ะกะธััะตะผะฝะฐั ะฟัะพะฑะปะตะผะฐ ะบะฐัะตััะฒะฐ ะธะปะธ ะดะพััะฐะฒะบะธ | ะะฝะฐะปะธะท ะฟัะธัะธะฝ ReturnReason ะฟะพ ะบะฐัะตะณะพัะธัะผ |

---

## ะัะธะปะพะถะตะฝะธะต โ ะกัััะบัััะฐ ะบะพะดะฐ (Go)

```
EcomSupplySim/
โโโ cmd/
โ   โโโ simulation/
โ       โโโ main.go              # ะขะพัะบะฐ ะฒัะพะดะฐ, CLI ัะปะฐะณะธ ััะตะฝะฐัะธะตะฒ
โโโ internal/
โ   โโโ config/
โ   โ   โโโ config.go            # ะัะต ะฟะฐัะฐะผะตััั ยง4 (SimConfig, Default())
โ   โโโ model/
โ   โ   โโโ order.go             # Order, OrderStatus, StatusEvent
โ   โ   โโโ courier.go           # Courier, CourierStatus, Utilization()
โ   โ   โโโ store.go             # Store, SortingHub, HasItems(), ReserveItems()
โ   โโโ dispatcher/
โ   โ   โโโ dispatcher.go        # ะะพะณะธะบะฐ ะผะฐัััััะธะทะฐัะธะธ ยง2 ะัะพัะตัั 2
โ   โโโ courier/
โ   โ   โโโ pool.go              # ะัะป ะฒะพัะบะตัะพะฒ-ะณะพัััะธะฝ ยง2 ะัะพัะตัั 4
โ   โโโ stats/
โ   โ   โโโ collector.go         # Thread-safe ัะฑะพั ะผะตััะธะบ ยง5
โ   โโโ simulation/
โ       โโโ engine.go            # ะัะฝะพะฒะฝะพะน ะดะฒะธะถะพะบ (Lab 2)
โโโ docs/
โ   โโโ lab1/
โ       โโโ report.md            # ะญัะพั ัะฐะนะป
โโโ go.mod
โโโ README.md
โโโ LICENSE
```

ะะฐัะฐะปะปะตะปัะฝะพััั ะฒ Go ะฑัะดะตั ัะตะฐะปะธะทะพะฒะฐะฝะฐ ัะตัะตะท:
- **Goroutine per entity**: ะบะฐะถะดัะน ะบัััะตั โ ะพัะดะตะปัะฝะฐั ะณะพัััะธะฝะฐ-ะฒะพัะบะตั
- **Buffered channels**: ะพัะตัะตะดะธ ัะบะปะฐะดะพะฒ (ะฑััะตั = `Q_max`) โ ะตััะตััะฒะตะฝะฝะฐั ะฑะปะพะบะธัะพะฒะบะฐ ะฟัะธ ะฟะตัะตะฟะพะปะฝะตะฝะธะธ
- **select / time.After**: ัะธะผัะปััะธั ัะฐะพัะธัะฝัั ัะพะฑััะธะน (ะฟะพะปะพะผะพะบ) ะฑะตะท busy-wait
- **sync.Mutex / atomic**: ะฑะตะทะพะฟะฐัะฝัะน ะดะพัััะฟ ะบ ะธะฝะฒะตะฝัะฐัั ะฝะตัะบะพะปัะบะธั ัะบะปะฐะดะพะฒ

---

*ะกะปะตะดัััะธะน ััะฐะฟ: ะัะฐะบัะธัะตัะบะฐั ัะฐะฑะพัะฐ โ2 โ ัะตะฐะปะธะทะฐัะธั ะดะฒะธะถะบะฐ ัะธะผัะปััะธะธ ะฒ Go.*
